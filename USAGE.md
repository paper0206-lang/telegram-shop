# Telegram Shop - 使用说明

## 🚀 快速启动

### 1. 获取Bot Token
1. 打开Telegram，搜索 [@BotFather](https://t.me/BotFather)
2. 发送 `/newbot` 命令
3. 按提示设置机器人名称和用户名
4. 保存获得的Bot Token

### 2. 配置环境
```bash
# 编辑 .env 文件
BOT_TOKEN=你的真实bot_token

# 启动机器人
npm start
```

## 📱 用户体验流程

### 主要功能
- **浏览商品** - 按分类查看或搜索商品
- **购物车** - 添加、修改商品数量
- **支付** - 使用Telegram Stars安全支付

### 命令列表
- `/start` - 开始使用
- `/shop` - 浏览商品 
- `/cart` - 查看购物车
- `/help` - 获取帮助

## 🛍️ 购物流程示例

1. **开始购物**
   ```
   用户: /start
   机器人: 显示欢迎消息和主菜单
   ```

2. **浏览商品**
   ```
   用户: 点击"浏览商品"
   机器人: 显示商品分类（电子产品、配件、游戏）
   ```

3. **查看商品详情**
   ```
   用户: 点击"电子产品"分类
   机器人: 显示该分类下的所有商品列表
   用户: 点击具体商品
   机器人: 显示商品详情（名称、价格、库存等）
   ```

4. **添加到购物车**
   ```
   用户: 点击"添加到购物车"
   机器人: 确认添加成功，显示购物车商品数量
   ```

5. **管理购物车**
   ```
   用户: /cart 或点击购物车按钮
   机器人: 显示购物车内容和总价
   用户: 可以调整数量、删除商品
   ```

6. **结账支付**
   ```
   用户: 点击"立即结账"
   机器人: 生成支付发票
   用户: 使用Telegram Stars完成支付
   机器人: 确认支付成功
   ```

## 💰 支付系统

### Telegram Stars
- 官方支付系统，安全可靠
- 符合移动应用商店政策
- 支持应用内购买
- 实时支付确认

### 支付流程
1. 用户点击结账
2. 系统验证购物车和库存
3. 生成Telegram发票
4. 用户确认支付
5. Telegram处理支付
6. 系统确认订单

## 🔍 搜索功能

用户可以直接发送文本消息搜索商品：
```
用户: 蓝牙
机器人: 显示包含"蓝牙"关键词的商品
```

## 📊 商店数据

### 当前商品
- 10种精选商品
- 3个主要分类
- 完整的库存管理
- 精选商品推荐

### 商品分类
- **电子产品** - 耳机、手表、移动电源等
- **配件** - 保护壳、支架、鼠标键盘等  
- **游戏** - 游戏手柄等

## ⚙️ 管理说明

### 商品管理
编辑 `data/products.json` 文件来管理商品：
```json
{
  "id": "唯一ID",
  "name": "商品名称",
  "description": "商品描述", 
  "price": 价格（Telegram Stars）,
  "category": "分类名",
  "stock": 库存数量,
  "featured": true/false
}
```

### 库存管理
- 自动检查库存
- 售完商品自动隐藏
- 支持库存警告

## 🔧 技术特点

- **模块化架构** - 服务分离，易于维护
- **内联键盘** - 流畅的用户交互体验
- **错误处理** - 完善的异常处理机制
- **内存缓存** - 购物车数据临时存储
- **实时验证** - 支付前库存二次验证

## 📝 注意事项

1. **测试环境** - 可以使用测试token进行功能测试
2. **支付测试** - 需要真实token才能测试支付功能
3. **数据持久化** - 当前购物车数据存储在内存中，重启会丢失
4. **扩展性** - 代码结构支持轻松添加新功能

## 🚀 生产部署建议

1. 使用环境变量管理敏感信息
2. 配置日志记录系统
3. 使用数据库替代JSON文件存储
4. 设置监控和报警
5. 定期备份数据

---

🎉 你的Telegram商店已经准备就绪！